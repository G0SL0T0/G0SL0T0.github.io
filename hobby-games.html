<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Игровые увлечения - Иван - Gosloto</title>
    <meta name="description" content="Мои игровые предпочтения, статистика и достижения">
    <link rel="icon" type="png" sizes="32x32" href="img/favicon-32x32.png">
    <link rel="stylesheet" href="css/game-style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="achievements.js" defer></script>
    <script src="steam-games.js" defer></script>
</head>
<body>

<header>
    <div class="container header-container">
        <a href="index.html" class="logo">Иван - Gosloto</a>
        <div class="menu-toggle"></div>
        <nav>
            <a href="hobbies.html" class="active">← Назад к хобби</a>
        </nav>
    </div>
</header>

<main>
    <section class="hobby-detail">
        <div class="container">
            <!-- Баннер с названием -->
            <div class="hobby-header">
                <div class="banner-container">
                    <img src="img/games-banner.png" alt="Игровая коллекция" class="hobby-banner game-banner">
                    <div class="banner-overlay">
                        <h1><i class="fas fa-gamepad"></i> Игровые увлечения</h1>
                        <p class="subtitle">От ретро-классики до современных AAA-проектов</p>
                    </div>
                </div>
            </div>
            
            <!-- Основной контент -->
            <div class="hobby-info">
                <div class="hobby-main">
                    <!-- Общая статистика -->
                    <div class="game-stats-section">
                        <h2><i class="fas fa-chart-bar"></i> Моя игровая статистика</h2>
                        <div class="stats-grid">
                            <!-- 10 000+ -->
                            <div class="stat-card accent-blue">
                                <i class="fas fa-hourglass"></i>
                                <h3><span class="counter" data-target="10000">0</span>+</h3>
                                <p>Часов в играх</p>
                            </div>

                            <!-- 73 % -->
                            <div class="stat-card accent-green">
                                <i class="fas fa-trophy"></i>
                                <h3><span class="counter-percent" data-target="73">0</span></h3>
                                <p>Достижений в Steam</p>
                            </div>

                            <!-- 100+ -->
                            <div class="stat-card accent-purple">
                                <i class="fas fa-gamepad"></i>
                                <h3><span class="counter-plus" data-target="100">0</span></h3>
                                <p>Игр в коллекции</p>
                            </div>
                        </div>
                    </div>

                    <!-- Любимые игры -->
                    <section class="favorite-games-section">
                        <h2><i class="fas fa-heart"></i> Топ-5 любимых игр</h2>

                        <div class="top-vertical">
                            <!-- JS - steam-games.js -->
                        </div>

                    </section>

                    <!-- Сейчас играю -->
                    <section class="current-games-section">
                        <h2><i class="fas fa-play"></i> Сейчас играю</h2>
                                                
                        <blockquote class="speech expandable">
                            <span class="speech-preview">
                                «Самые ценные достижения — те, что мы ставим перед собой…»
                            </span>
                            <span class="speech-full">
                                «Самые ценные достижения в играх — те, что мы ставим перед собой. Я заранее придумываю челленджи: пройти уровень без урона, пройти игру без фаст тревелов или миникарты, построить мегабазу. Эти личные цели не дают мне бросить игру на полпути и превращают каждую сессию в маленький квест.»
                            </span>
                        </blockquote>                  

                        <!-- Expeditions -->
                        <div class="current-game-card accordion-item">
                            <img src="img/expeditions.jpg" alt="Expeditions">
                            <div class="current-info">
                            <h3>Expeditions: A MudRunner Game</h3>
                            <p class="progress-label">47 % пройдено</p>
                            <div class="progress-bar">
                                <div class="progress" style="width: 47%"></div>
                            </div>
                            <p class="meta">Последний запуск: сегодня / вчера</p>
                            </div>

                            <!-- аккордеон -->
                            <div class="current-drawer">
                            <div class="challenge-block">
                                <h4>Мои челленджи</h4>
                                <ul class="custom-list">
                                <li class="challenge-item">
                                    <span class="label">Закрыть полностью карту только на скаутах</span>
                                    <div class="mini-bar">
                                    <div class="mini-progress" style="width: 50%"></div>
                                    </div>
                                    <span class="percent">x / x</span>
                                </li>
                                <li class="challenge-item">
                                    <span class="label">Повредить колеса на скауте макс. скоростью</span>
                                    <div class="mini-bar">
                                    <div class="mini-progress" style="width: 0%"></div>
                                    </div>
                                    <span class="percent">0 / 1</span>
                                </li>
                                </ul>
                            </div>

                            <div class="achievement-block">
                                <h4>Мои достижения</h4>
                                <ul class="custom-list">
                                <li class="achievement-item">
                                    <span class="label">Первые 100 км пробег</span>
                                    <div class="mini-bar done">
                                    <div class="mini-progress" style="width: 100%"></div>
                                    </div>
                                    <i class="fas fa-check-circle"></i>
                                </li>
                                <li class="achievement-item">
                                    <span class="label">Первые 200 км пробега</span>
                                    <div class="mini-bar">
                                    <div class="mini-progress" style="width: 70%"></div>
                                    </div>
                                    <span class="percent">140 / 200</span>
                                </li>
                                <li class="achievement-item">
                                    <span class="label">Эвакуация тяжелого вездехода скаутом (без мощностей вездехода)</span>
                                    <div class="mini-bar">
                                    <div class="mini-progress" style="width: 40%"></div>
                                    </div>
                                    <span class="percent">2 / 5</span>
                                </li>
                                </ul>
                            </div>

                            <button class="btn-screens" data-game="Expeditions: A MudRunner Game">
                                <i class="fas fa-images"></i> Скриншоты
                            </button>
                            </div>
                        </div>

                        <!-- EVE FRONTIER -->
                        <div class="current-game-card accordion-item">
                            <img src="img/eve-frontier.jpg" alt="EVE Frontier">
                            <div class="current-info">
                                <h3>EVE Frontier</h3>
                                <p class="progress-label">32 % пройдено</p>
                                <div class="progress-bar">
                                    <div class="progress" style="width: 32%"></div>
                                </div>
                                <p class="meta">Закрытая альфа тест</p>
                            </div>

                            <div class="current-drawer">
                                <!-- Мои челленджи -->
                                <div class="challenge-block">
                                <h4>Мои челленджи</h4>
                                <ul class="custom-list">
                                    <li class="challenge-item">
                                        <span class="label">Набить 10+ killmark на одном корабле</span>
                                        <div class="mini-bar">
                                            <div class="mini-progress" style="width: 40%"></div>
                                        </div>
                                        <span class="percent">4 / 10</span>
                                    </li>
                                    <li class="challenge-item">
                                        <span class="label">Построить last принтер на месте дислокации</span>
                                        <div class="mini-bar">
                                            <div class="mini-progress" style="width: 25%"></div>
                                        </div>
                                        <span class="percent">2 / 4</span>
                                    </li>
                                </ul>
                            </div>

                            <!-- Мои достижения -->
                            <div class="achievement-block">
                                <h4>Мои достижения</h4>
                                <ul class="custom-list">
                                    <li class="achievement-item">
                                        <span class="label">Первое убийство в "чесном" PvP</span>
                                        <div class="mini-bar done">
                                            <div class="mini-progress" style="width: 100%"></div>
                                        </div>
                                        <i class="fas fa-check-circle"></i>
                                    </li>
                                    <li class="achievement-item">
                                        <span class="label">Открыть 5 секретных секторов</span>
                                        <div class="mini-bar">
                                            <div class="mini-progress" style="width: 60%"></div>
                                        </div>
                                        <span class="percent">3 / 5</span>
                                    </li>
                                    <li class="achievement-item">
                                        <span class="label">Убить стационарными турелями</span>
                                        <div class="mini-bar done">
                                            <div class="mini-progress" style="width: 0%"></div>
                                        </div>
                                        <i class="percent">0 / 1</i>
                                    </li>
                                </ul>
                            </div>

                            <button class="btn-screens" data-game="EVE Frontier">
                                <i class="fas fa-images"></i> Скриншоты
                            </button>
                            </div>
                        </div>
                    </section>


                </div>
                                                                
                <!-- --------------  STEAM GAMES  -------------- -->
                <section class="steam-games">
                    <h2><i class="fab fa-steam"></i> Мои игры в Steam</h2>
                    <button class="mini-toggle" id="toggleSteam" title="Показать/скрыть">
                        <i class="fas fa-list"></i>
                    </button>
                    <br>Разработка

                    <div id="steamList" class="steam-list hidden">
                        <ul id="steamGamesList">
                        <!-- заполняемый скриптом -->
                        </ul>
                    </div>

                    <!-- Модальное окно для деталей игры -->
                    <div id="steamModal" class="steam-modal hidden">
                        <div class="steam-modal-content">
                        <span class="steam-modal-close">&times;</span>
                        <div id="steamModalBody"></div>
                        </div>
                    </div>
                </section>

                <!-- Сайдбар -->
                <div class="hobby-sidebar">
                    <div class="sidebar-inner">
                        <!-- Жанры -->
                        <div class="sidebar-block">
                            <h3><i class="fas fa-tags"></i> Предпочитаемые жанры</h3>
                            <ul class="genre-list">
                                <li>MMO, прогрессивные ММО</li>
                                <li>Космические тематики и космо-RPG</li>
                                <li>Стратегии (X3 - X4, Dawn of War)</li>
                                <li>Симуляторы</li>
                                <li>Сюжетные RPG</li>
                            </ul>
                        </div>

                        <!-- Платформы -->
                        <div class="sidebar-block">
                            <h3><i class="fas fa-desktop"></i> Платформы</h3>
                            <div class="platforms">
                                <span class="platform-tag"><i class="fas fa-desktop"></i> PC</span>
                                <span class="platform-tag"><i class="fab fa-steam"></i> Steam</span>
                                <span class="platform-tag"><i class="fas fa-mobile-alt"></i> Мобильные</span>
                            </div>
                        </div>

                        <!-- Достижения -->
                        <div class="sidebar-block">
                            <h3><i class="fas fa-trophy"></i> Последние достижения</h3>
                            <ul class="achievements-list" id="latestAchievements">
                                <!-- JS - achievements.js -->
                            </ul>
                            <button id="openAllAchievements" class="button" style="margin-top:.75rem;width:100%">
                                <i class="fas fa-list"></i> Все достижения
                            </button>
                        </div>

                        <!-- Контакты -->
                        <div class="sidebar-block">
                            <h3><i class="fas fa-user"></i> Контакты</h3>
                            <ul class="genre-list">
                                <li>
                                    <a href="https://steamcommunity.com/id/Gosloto/" target="_blank" style="color: #144477; text-decoration: none;">
                                        <i class="fab fa-steam"></i> Steam профиль
                                    </a>
                                </li>
                                <li>
                                    <a href="https://discord.gg/gosloto" target="_blank" style="color: #5865F2; text-decoration: none;">
                                        <i class="fab fa-discord"></i> Мой Discord: gosloto
                                    </a>
                                </li>
                            </ul>
                        </div>

                        <!-- Скриншоты -->
                        <section class="mini-gallery">
                            <div class="container">
                                <h2><i class="fas fa-images"></i> Скриншоты</h2>
                                <div class="mini-grid">
                                    <img src="img/screenshot/screenshot1.jpg" loading="lazy">
                                    <img src="img/screenshot/screenshot2.jpg" loading="lazy">
                                    <img src="img/screenshot/screenshot3.jpg" loading="lazy">
                                </div>
                                <button class="button open-gallery" id="openGalleryBtn">
                                    <i class="fas fa-external-link-alt"></i> Показать все
                                </button>
                            </div>
                        </section>

                        <!-- Модальное окно -->
                        <div id="galleryModal" class="modal">
                            <div class="modal-content">
                                <span class="close">&times;</span>

                                <div class="filter-row">
                                <select id="gameSel">
                                    <option value="all">Все игры</option>
                                </select>
                                <select id="sortSel">
                                    <option value="date-desc">Новые</option>
                                    <option value="date-asc">Старые</option>
                                </select>
                                </div>

                                <div id="modalGrid" class="modal-grid"></div>
                                <button id="modalMoreBtn" class="load-more">Показать ещё</button>
                            </div>
                        </div>

                        <link rel="stylesheet" href="css/gallery.css">
                        <script src="gallery.js" defer></script>

                    </div>
                </div>
            </div>
        </div>




    </section>
</main>

<footer>
    <div class="container">
        <p>&copy; 2025 Gosloto. Все права НЕ защищены.</p>
    </div>
</footer>

<div id="achievementsModal" class="modal achievements-modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <h2 style="margin-top:0;color:#e2e8f0;">Все достижения и челленджи</h2>

        <!-- Фильтр по игре -->
        <select id="achGameFilter" class="ach-filter" style="margin-bottom:1.5rem;padding:.5rem 1rem;border-radius:8px;border:none;font-size:1rem;"></select>

        <div id="allAchievementsList" class="modal-grid"></div>
    </div>
</div>

<script>
    /* ==== кнопка «Скриншоты» в «Сейчас играю» (как в TOP-5) ==== */
    document.addEventListener('click', e => {
        const btn = e.target.closest('.btn-screens');
        if (!btn) return;

        e.stopPropagation();
        const gameTitle = btn.dataset.game;

        /* открываем общую модалку */
        const modal = document.getElementById('galleryModal');
        document.body.appendChild(modal);
        modal.style.display = 'flex';

        /* гарантируем загрузку данных */
        if (!window.allImages?.length) window.loadData?.();

        /* выбираем игру и перерисовываем */
        const gameSel = document.getElementById('gameSel');
        gameSel.value = gameTitle;
        window.resetAndRender?.();
    });
</script>
<script>
    document.addEventListener('click', e => {
        const block = e.target.closest('.speech.expandable');
        if (!block) return;

        block.classList.toggle('open');
    });
</script>
<script>
    document.querySelector('.menu-toggle').addEventListener('click', function() {
        document.querySelector('nav').classList.toggle('show');
    });
</script>

<script>
    window.addEventListener('scroll', () => {
        document.body.style.setProperty('--scroll-y', window.scrollY + 'px');
        document.body.setAttribute('data-scroll', '');
    }, { passive: true });
</script>

<script>
function animateValue(el, start, end, duration) {
  let startTime = null;

  function step(timestamp) {
    if (!startTime) startTime = timestamp;
    const progress = Math.min((timestamp - startTime) / duration, 1);
    const value = Math.floor(progress * (end - start) + start);
    el.textContent = value.toLocaleString();
    if (progress < 1) requestAnimationFrame(step);
  }
  requestAnimationFrame(step);
}
/* ---------- счётчик для 73 % ---------- */
function animatePercent(el, start, end, duration) {
  let startTime = null;
  function step(timestamp) {
    if (!startTime) startTime = timestamp;
    const progress = Math.min((timestamp - startTime) / duration, 1);
    const value = Math.floor(progress * (end - start) + start);
    el.textContent = value + '%';
    if (progress < 1) requestAnimationFrame(step);
  }
  requestAnimationFrame(step);
}
/* ---------- счётчик для 100+ ---------- */
function animatePlus(el, start, end, duration) {
  let startTime = null;
  function step(timestamp) {
    if (!startTime) startTime = timestamp;
    const progress = Math.min((timestamp - startTime) / duration, 1);
    const value = Math.floor(progress * (end - start) + start);
    el.textContent = value + '+';
    if (progress < 1) requestAnimationFrame(step);
  }
  requestAnimationFrame(step);
}
const observer = new IntersectionObserver(entries => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      const card = entry.target;
      /* 10 000+ */
      const hours = card.querySelector('.counter[data-target]');
      if (hours && !hours.dataset.animated) {
        animateValue(hours, 0, +hours.dataset.target, 1500);
        hours.dataset.animated = true;
      }
      /* 73 % */
      const percent = card.querySelector('.counter-percent');
      if (percent && !percent.dataset.animated) {
        animatePercent(percent, 0, 73, 1500);
        percent.dataset.animated = true;
      }
      /* 100+ */
      const plus = card.querySelector('.counter-plus');
      if (plus && !plus.dataset.animated) {
        animatePlus(plus, 0, 100, 1500);
        plus.dataset.animated = true;
      }
    }
  });
}, { threshold: .5 });

document.querySelectorAll('.stat-card').forEach(card => observer.observe(card));
</script>

<script>
    document.addEventListener('click', e => {
    const card = e.target.closest('.current-game-card');
    if (!card) return;

    card.classList.toggle('open');
    });
</script>

</body>
</html>